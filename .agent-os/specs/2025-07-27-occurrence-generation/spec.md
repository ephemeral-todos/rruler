# Spec Requirements Document

> Spec: Basic Occurrence Generation
> Created: 2025-07-27
> Status: Planning

## Overview

Implement occurrence date generation for parsed RRULE patterns, enabling calculation of recurring event dates with COUNT and UNTIL termination conditions and date range filtering.

## User Stories

### Calculate Recurring Occurrences

As a developer using the Rruler library, I want to generate occurrence dates from an RRULE, so that I can calculate when recurring events will happen.

**Detailed workflow:** Parse an RRULE string, create an occurrence generator, specify a start date and optional date range, then iterate through calculated occurrence dates respecting COUNT/UNTIL limits.

### Validate Specific Dates

As a developer, I want to check if a specific DateTime represents a valid occurrence, so that I can validate user-provided dates against the recurrence pattern.

**Detailed workflow:** Given an RRULE and a specific DateTime, determine whether that date/time would be generated by the recurrence rule from the specified start date.

### Filter Occurrences by Date Range

As a developer, I want to generate occurrences within a specific date range, so that I can efficiently calculate events for calendar views or time periods.

**Detailed workflow:** Provide start and end dates to limit occurrence generation, avoiding unnecessary computation for dates outside the desired range.

## Spec Scope

1. **DateTime Integration** - Robust handling of DateTimeImmutable objects with timezone support
2. **Basic Occurrence Calculator** - Generate occurrences for DAILY and WEEKLY frequency patterns
3. **COUNT Termination** - Stop generating occurrences after specified count is reached
4. **UNTIL Termination** - Stop generating occurrences after specified end date
5. **Date Range Filtering** - Generate occurrences only within specified start/end dates

## Out of Scope

- MONTHLY and YEARLY patterns (Phase 3)
- BY* rules (BYMONTHDAY, BYDAY, etc.) (Phase 3)
- BYSETPOS logic (Phase 3)
- Complex timezone handling beyond basic UTC/local time
- Performance optimizations beyond basic generator patterns

## Expected Deliverable

1. **OccurrenceGenerator class** that can calculate occurrence dates from Rrule objects
2. **DateTime validation** for checking if specific dates match the recurrence pattern
3. **Working examples** of generating daily and weekly occurrences with COUNT/UNTIL limits

## Spec Documentation

- Tasks: @.agent-os/specs/2025-07-27-occurrence-generation/tasks.md
- Technical Specification: @.agent-os/specs/2025-07-27-occurrence-generation/sub-specs/technical-spec.md
- Tests Specification: @.agent-os/specs/2025-07-27-occurrence-generation/sub-specs/tests.md